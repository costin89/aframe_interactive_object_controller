<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>A-Frame Scene with Object Orbit Component</title>
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
<script>
  AFRAME.registerComponent('touch-controls', {
    schema: {
      speed: {type: 'number', default: 1},
      zoomSpeed: {type: 'number', default: 0.005}
    },
    init: function() {
      this.handleTouchMove = this.handleTouchMove.bind(this);
      this.handleTouchEnd = this.handleTouchEnd.bind(this);
      this.startTouches = [];

      this.el.addEventListener('touchstart', (event) => {
        this.startTouches = event.touches;
      });

      this.el.addEventListener('touchmove', this.handleTouchMove);
      this.el.addEventListener('touchend', this.handleTouchEnd);
    },
    handleTouchMove: function(event) {
      event.preventDefault(); // Verhindert das Scrollen auf Touch-Ger√§ten
      const touches = event.touches;

      // Drehung mit einem Finger
      if (touches.length === 1 && this.startTouches.length === 1) {
        const deltaX = touches[0].clientX - this.startTouches[0].clientX;
        const deltaY = touches[0].clientY - this.startTouches[0].clientY;
        this.rotate(deltaX, deltaY);
      }

      // Zoomen mit zwei Fingern
      if (touches.length === 2 && this.startTouches.length === 2) {
        const startDistance = this.calculateDistance(this.startTouches[0], this.startTouches[1]);
        const currentDistance = this.calculateDistance(touches[0], touches[1]);
        const distanceChange = currentDistance - startDistance;
        this.zoom(distanceChange * this.data.zoomSpeed);
      }

      this.startTouches = event.touches;
    },
    handleTouchEnd: function(event) {
      this.startTouches = event.touches;
    },
    rotate: function(deltaX, deltaY) {
      let rotation = this.el.getAttribute('rotation');
      rotation.y += deltaX * this.data.speed;
      rotation.x -= deltaY * this.data.speed;
      this.el.setAttribute('rotation', rotation);
    },
    zoom: function(factor) {
      let scale = this.el.getAttribute('scale');
      scale.x += factor;
      scale.y += factor;
      scale.z += factor;
      this.el.setAttribute('scale', scale);
    },
    calculateDistance: function(touch1, touch2) {
      const dx = touch1.clientX - touch2.clientX;
      const dy = touch1.clientY - touch2.clientY;
      return Math.sqrt(dx * dx + dy * dy);
    }
  });
</script>
</head>
<body>
    <a-scene>
      <a-box position="0 1.5 -5" rotation="0 0 0" color="#4CC3D9" interactive-controls="speed: 0.1; zoomSpeed: 0.05; minScale: 1.0; maxScale: 2.0"></a-box>
        <a-entity camera look-controls="false" position="0 1.6 0">
          <a-cursor id="cursor" color="red" fuse="false"></a-cursor>
        </a-entity>
    </a-scene>
</body>
</html>
