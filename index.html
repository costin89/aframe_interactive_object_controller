<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>A-Frame Scene with Object Orbit Component</title>
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
<script>
  AFRAME.registerComponent('touch-controls', {
    schema: {
      speed: {type: 'number', default: 0.5},
      zoomSpeed: {type: 'number', default: 0.005},
      minScale: {type: 'number', default: 0.5},
      maxScale: {type: 'number', default: 2}
    },
    init: function() {
      this.handleTouchMove = this.handleTouchMove.bind(this);
      this.handleTouchEnd = this.handleTouchEnd.bind(this);
      this.startTouches = [];
      this.lastScale = 1;
    },
    handleTouchStart: function(evt) {
      this.startTouches = evt.touches;
    },
    handleTouchMove: function(evt) {
      evt.preventDefault();
      if (evt.touches.length === 1 && this.startTouches.length === 1) {
        // Drehen
        let deltaX = evt.touches[0].pageX - this.startTouches[0].pageX;
        let deltaY = evt.touches[0].pageY - this.startTouches[0].pageY;
        this.el.object3D.rotation.y -= deltaX * this.data.speed * 0.01;
        this.el.object3D.rotation.x -= deltaY * this.data.speed * 0.01;
      } else if (evt.touches.length === 2 && this.startTouches.length === 2) {
        // Zoomen
        let currentDistance = this.getDistance(evt.touches[0], evt.touches[1]);
        let startDistance = this.getDistance(this.startTouches[0], this.startTouches[1]);
        let scale = currentDistance / startDistance;
        this.scaleObject(scale / this.lastScale);
        this.lastScale = scale;
      }
      this.startTouches = evt.touches;
    },
    handleTouchEnd: function(evt) {
      if (evt.touches.length < 2) {
        this.lastScale = 1;
      }
    },
    getDistance: function(touch1, touch2) {
      var dx = touch1.pageX - touch2.pageX;
      var dy = touch1.pageY - touch2.pageY;
      return Math.sqrt(dx * dx + dy * dy);
    },
    scaleObject: function(scaleFactor) {
      let scale = this.el.object3D.scale.clone().multiplyScalar(scaleFactor);
      scale.x = Math.max(this.data.minScale, Math.min(this.data.maxScale, scale.x));
      scale.y = Math.max(this.data.minScale, Math.min(this.data.maxScale, scale.y));
      scale.z = Math.max(this.data.minScale, Math.min(this.data.maxScale, scale.z));
      this.el.object3D.scale.set(scale.x, scale.y, scale.z);
    },
    update: function() {
      this.el.addEventListener('touchmove', this.handleTouchMove);
      window.addEventListener('touchend', this.handleTouchEnd);
      this.el.addEventListener('touchstart', (evt) => this.handleTouchStart(evt));
    },
    remove: function() {
      this.el.removeEventListener('touchmove', this.handleTouchMove);
      window.removeEventListener('touchend', this.handleTouchEnd);
      this.el.removeEventListener('touchstart', this.handleTouchStart);
    }
  });
</script>
</head>
<body>
    <a-scene>
      <a-box id="interactive-box" position="0 1.5 -5" rotation="0 0 0" color="#4CC3D9" touch-controls></a-box>
      <a-entity camera look-controls="false" position="0 1.6 0">
          <a-cursor id="cursor" color="red" fuse="false"></a-cursor>
        </a-entity>
    </a-scene>
</body>
</html>
