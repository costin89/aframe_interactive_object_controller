<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>A-Frame Scene with Enhanced Touch Interaction</title>
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
    <script>
      AFRAME.registerComponent('enhanced-touch-rotate', {
        schema: {
          speed: {type: 'number', default: 1} // Geschwindigkeit der Drehung
        },
        init: function() {
          this.handleTouchMove = this.handleTouchMove.bind(this);
          this.startX = 0;
          this.startY = 0;
          this.isTouching = false;
        },
        play: function() {
          this.el.addEventListener('touchstart', this.handleTouchStart.bind(this));
          this.el.addEventListener('touchmove', this.handleTouchMove);
          this.el.addEventListener('touchend', this.handleTouchEnd.bind(this));
        },
        pause: function() {
          this.el.removeEventListener('touchstart', this.handleTouchStart);
          this.el.removeEventListener('touchmove', this.handleTouchMove);
          this.el.removeEventListener('touchend', this.handleTouchEnd);
        },
        handleTouchStart: function(event) {
          this.isTouching = true;
          this.startX = event.touches[0].pageX;
          this.startY = event.touches[0].pageY;
        },
        handleTouchMove: function(event) {
          if (!this.isTouching) return;
          event.preventDefault(); // Verhindert Scrollen beim Touch
          var currentX = event.touches[0].pageX;
          var currentY = event.touches[0].pageY;
          var diffX = currentX - this.startX;
          var diffY = currentY - this.startY;
          this.startX = currentX;
          this.startY = currentY;
          var rotation = this.el.getAttribute('rotation');
          rotation.y += diffX * this.data.speed;
          rotation.x -= diffY * this.data.speed;
          this.el.setAttribute('rotation', rotation);
        },
        handleTouchEnd: function(event) {
          this.isTouching = false;
        }
      });
    </script>
</head>
<body>
    <a-scene>
      <a-box position="0 2 -5" rotation="0 0 0" color="#4CC3D9" enhanced-touch-rotate="speed: 0.5"></a-box>
      <a-entity camera look-controls position="0 1.6 0">
        <a-cursor color="red"></a-cursor>
      </a-entity>
    </a-scene>
</body>
</html>
